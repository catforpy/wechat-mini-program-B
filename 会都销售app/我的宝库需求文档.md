# 我的宝库 - 需求文档

## 一、页面结构

### 1. 入口
- 从"我的账户"页面 → 点击"我的宝库"图标进入
- 路径：`/pages/profile/my-collection`

### 2. 顶部标签栏（横向滑动）
```
┌─────────────────────────────────────┐
│  [可购买]  [可租赁]  [可合作]        │
└─────────────────────────────────────┘
```

- 3个标签可以横向滑动
- 默认选中第一个"可购买"
- 点击不同标签切换显示对应的小程序

## 二、数据来源

### 与首页联动
- 首页有3个类型标签：可购买、可租赁、可合作
- 用户在首页点击小程序卡片上的"收藏"按钮⭐
- 收藏的小程序会保存到本地存储，按照类型分类

### 数据结构
```javascript
{
  "purchase": [  // 可购买
    {
      id: "xxx",
      name: "快递查件小程序",
      icon: "/static/xxx.jpg",
      emoji: "📦",
      price: "599",
      douPrice: "5990",
      firstLevel: "物流服务",    // 一级分类
      secondLevel: "查件",       // 二级分类
      type: "purchase",          // 类型
      collectedAt: "2025-02-13"  // 收藏时间
    }
  ],
  "rent": [...],      // 可租赁
  "cooperate": [...]  // 可合作
}
```

## 三、展示格式

### 分类路径 + 小程序卡片
```
┌─────────────────────────────────────────┐
│  物流服务 > 查件                         │  ← 分类路径
│  ┌──────┐ ┌──────┐ ┌──────┐             │
│  │ 图标  │ │ 图标  │ │ 图标  │             │
│  │ 名称  │ │ 名称  │ │ 名称  │ ...        │  ← 小程序卡片（3列网格）
│  │ 价格  │ │ 价格  │ │ 价格  │             │
│  └──────┘ └──────┘ └──────┘             │
│                                         │
│  物流服务 > 货物运输                     │  ← 另一个分类
│  ┌──────┐ ┌──────┐                      │
│  │ 图标  │ │ 图标  │ ...                 │
│  │ 名称  │ │ 名称  │                     │
│  └──────┘ └──────┘                      │
└─────────────────────────────────────────┘
```

### 视觉说明
1. **分类路径**（每组的标题）
   - 格式：`一级分类 > 二级分类`
   - 字体：28rpx，颜色#666
   - 间距：上方30rpx，下方20rpx

2. **小程序卡片**（每组内的内容）
   - 3列网格布局
   - 每个卡片显示：图标、名称、价格
   - 卡片可点击，跳转到详情页

3. **空状态**
   - 如果某个标签下没有收藏的小程序
   - 显示：暂无收藏，快去首页选购吧

## 四、交互逻辑

### 1. 首页收藏
```
用户在首页操作：
1. 切换到"可购买"标签
2. 选择二级分类（如：物流服务 > 查件）
3. 看到小程序列表
4. 点击某个小程序的"收藏"按钮⭐

系统处理：
1. 保存到本地存储 'my_collection'
2. 按照类型(type)分类存储
3. 记录一级分类、二级分类信息
```

### 2. 我的宝库取消收藏
```
用户在"我的宝库"操作：
1. 长按小程序卡片
2. 弹出菜单："取消收藏"
3. 点击确认后，从收藏中移除

系统处理：
1. 从本地存储中删除
2. 首页对应小程序的收藏图标取消高亮
```

### 3. 点击小程序
```
从"我的宝库"点击小程序卡片：
1. 跳转到小程序详情页
2. 传递完整的分类信息和类型信息
```

## 五、页面导航

```
首页（index.vue）
  ↓ 点击收藏
保存到本地存储

我的账户 → 我的宝库
  ↓ 显示收藏的小程序
  ↓ 按类型标签分组
  ↓ 按分类路径展示
```

## 六、数据存储

### 本地存储Key
```javascript
uni.getStorageSync('my_collection')
```

### 存储格式
```javascript
{
  "purchase": [
    {
      id: "模板ID",
      name: "模板名称",
      icon: "图标路径",
      emoji: "图标emoji",
      price: "价格",
      douPrice: "都达豆价格",
      firstLevel: "一级分类",
      secondLevel: "二级分类",
      type: "purchase",
      collectedAt: "收藏时间戳"
    }
  ],
  "rent": [],
  "cooperate": []
}
```

## 七、界面示例

```
┌────────────────────────────────────────┐
│  ← 我的小程序                我的宝库   │
├────────────────────────────────────────┤
│  ┌──────────────────────────────────┐  │
│  │  [可购买] [可租赁] [可合作]       │  │
│  └──────────────────────────────────┘  │
│                                         │
│  物流服务 > 查件                        │
│  ┌────┐ ┌────┐ ┌────┐                 │
│  │ 📦 │ │ 📦 │ │ 📦 │                 │
│  │查件│ │快递│ │追踪│                 │
│  │¥599│ │¥799│ │¥399│                 │
│  └────┘ └────┘ └────┘                 │
│                                         │
│  物流服务 > 货物运输                    │
│  ┌────┐ ┌────┐                         │
│  │ 🚚 │ │ 🚛 │                         │
│  │货运│ │物流│                         │
│  │¥899│ │¥699│                         │
│  └────┘ └────┘                         │
└────────────────────────────────────────┘
```

## 八、确认项

请确认以下理解是否正确：

1. ✅ "我的宝库"页面有3个标签：可购买、可租赁、可合作
2. ✅ 数据来源是用户在首页点击收藏的小程序
3. ✅ 展示时按"一级分类 > 二级分类"分组
4. ✅ 每个分组下显示该分类下收藏的小程序卡片（3列网格）
5. ✅ 可以取消收藏（长按弹出菜单）
6. ✅ 点击小程序跳转到详情页
