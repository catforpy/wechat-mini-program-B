# 商户端"我的"页面设计文档

> 项目名称：唐极课得 - 商户端
> 页面名称：我的（Profile）
> 版本：v1.0
> 设计日期：2025-02-09

---

## 📋 目录

1. [页面概述](#页面概述)
2. [主体类型定义](#主体类型定义)
3. [页面结构设计](#页面结构设计)
4. [UI设计稿](#ui设计稿)
5. [交互流程](#交互流程)
6. [资质上传规则](#资质上传规则)
7. [数据结构](#数据结构)
8. [开发规范](#开发规范)

---

## 页面概述

### 功能定位

商户端的个人中心页面，主要功能：
1. **展示商户基本信息**：头像、昵称、主体类型、认证状态
2. **资质管理**：上传、查看、更新商户资质
3. **主体类型切换**：支持企业、个人、境外主体三种类型
4. **实名认证状态**：显示认证进度和状态

### 用户角色

- **未认证用户**：需要完成资质上传和实名认证
- **已认证用户**：可以查看和更新资质信息
- **认证失败用户**：需要重新提交资质

---

## 主体类型定义

### 1. 企业（Enterprise）

**适用对象**：中国大陆注册的企业、个体工商户

**主体特征**：
- 有统一社会信用代码
- 有营业执照
- 有法人代表
- 可能有对公账户

**主体类型标识**：`enterprise`

---

### 2. 个人（Individual）

**适用对象**：中国大陆的个人商户、个体经营者

**主体特征**：
- 有身份证
- 年满18周岁
- 有个人银行卡
- 可能是个体户但未办理营业执照

**主体类型标识**：`individual`

---

### 3. 境外主体（Overseas）

**适用对象**：港澳台及国外的企业或个人

**主体特征**：
- 港澳台：有港澳居民来往内地通行证、台湾居民来往大陆通行证
- 国外：有护照、商业登记证
- 可能需要额外文件（如公证认证文件）

**主体类型标识**：`overseas`

---

## 页面结构设计

### 整体布局

```
┌─────────────────────────────────────┐
│  状态栏（自适应）                    │
├─────────────────────────────────────┤
│  ┌───────────────────────────────┐  │
│  │  用户头像 + 基本信息          │  │  ← 头部卡片
│  │  认证状态 + 主体类型          │  │
│  └───────────────────────────────┘  │
│                                     │
│  ┌───────────────────────────────┐  │
│  │  资质管理                      │  │  ← 资质卡片
│  │  ├ 营业执照/身份证           │  │
│  │  ├ 法人身份证明             │  │
│  │  ├ 其他资质文件             │  │
│  │  └ 认证状态                  │  │
│  └───────────────────────────────┘  │
│                                     │
│  ┌───────────────────────────────┐  │
│  │  功能入口                      │  │  ← 功能列表
│  │  ├ 我的订单                   │  │
│  │  ├ 收货地址                   │  │
│  │  ├ 客服中心                   │  │
│  │  ├ 设置                       │  │
│  │  └ 关于                       │  │
│  └───────────────────────────────┘  │
│                                     │
│  ┌───────────────────────────────┐  │
│  │  退出登录                      │  │
│  └───────────────────────────────┘  │
│                                     │
│  Tab Bar（60px高度）               │
└─────────────────────────────────────┘
```

---

## UI设计稿

### 1. 头部信息卡片

```
┌─────────────────────────────────────┐
│  ┌──┐                             │
│  │📷│  张三                       │
│  │  │  138****8888                │
│  └──┘                             │
│                                     │
│  主体类型：企业      [切换类型 >]   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  ✓ 已认证                   │   │
│  │  认证时间：2025-01-15        │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘

颜色方案：
- 背景：线性渐变 #667eea → #764ba2
- 文字：白色 #ffffff
- 认证状态：绿色背景 #07c160
```

**未认证状态**：
```
┌─────────────────────────────────────┐
│  ┌──┐                             │
│  │➕│  未认证                     │
│  └──┘  点击完成实名认证           │
│                                     │
│  主体类型：--        [去认证 >]     │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  ⚠️ 未认证                  │   │
│  │  请先完成实名认证            │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

---

### 2. 资质管理卡片

#### 企业用户

```
┌─────────────────────────────────────┐
│  资质管理              [更新资质 >] │
├─────────────────────────────────────┤
│  ✓ 营业执照                        │
│  统一社会信用代码：91xxxxx         │
│  有效期至：2028-12-31              │
│  [查看图片] [更新]                 │
├─────────────────────────────────────┤
│  ✓ 法定代表人身份证               │
│  姓名：张三                        │
│  证件号：11010119900101****       │
│  [查看图片] [更新]                 │
├─────────────────────────────────────┤
│  ✓ 开户许可证                     │
│  [查看图片] [更新]                 │
├─────────────────────────────────────┤
│  ✓ 行业许可证（可选）             │
│  [上传] [查看图片] [更新]          │
└─────────────────────────────────────┘
```

#### 个人用户

```
┌─────────────────────────────────────┐
│  资质管理              [更新资质 >] │
├─────────────────────────────────────┤
│  ✓ 身份证                         │
│  姓名：张三                        │
│  证件号：11010119900101****       │
│  [查看图片] [更新]                 │
├─────────────────────────────────────┤
│  ✓ 银行卡（可选）                 │
│  [上传] [查看图片] [更新]          │
├─────────────────────────────────────┤
│  ⚠️ 补充资料（可选）              │
│  营业执照、行业许可证等           │
│  [上传更多资料]                    │
└─────────────────────────────────────┘
```

#### 境外主体

```
┌─────────────────────────────────────┐
│  资质管理              [更新资质 >] │
├─────────────────────────────────────┤
│  主体地区：[香港 ▼]                │
│  选项：香港/澳门/台湾/其他         │
├─────────────────────────────────────┤
│  ✓ 商业登记证                     │
│  [查看图片] [更新]                 │
├─────────────────────────────────────┤
│  ✓ 负责人证件                     │
│  类型：[港澳通行证 ▼]            │
│  证件号：H123456(**)              │
│  [查看图片] [更新]                 │
├─────────────────────────────────────┤
│  ✓ 委托书（如非法人本人办理）     │
│  [上传] [查看图片] [更新]          │
├─────────────────────────────────────┤
│  ✓ 公证认证文件                   │
│  [查看图片] [更新]                 │
└─────────────────────────────────────┘
```

---

### 3. 功能列表

```
┌─────────────────────────────────────┐
│  我的服务                          │
├─────────────────────────────────────┤
│  📦 我的订单           [查看全部 >] │
│     待付款  待发货  待收货  已完成  │
├─────────────────────────────────────┤
│  📍 收货地址           [管理 >]     │
│     北京市朝阳区xxx街道xxx号       │
├─────────────────────────────────────┤
│  💰 我的钱包           [查看 >]     │
│     余额：¥999.99                  │
├─────────────────────────────────────┤
│  📞 客服中心                        │
│     在线客服 / 常见问题            │
├─────────────────────────────────────┤
│  ⚙️  设置                            │
│     账号安全 / 消息通知 / 隐私设置  │
├─────────────────────────────────────┤
│  ℹ️  关于                            │
│     关于我们 / 用户协议 / 隐私政策  │
└─────────────────────────────────────┘
```

---

### 4. 认证流程UI

#### 主体类型选择

```
┌─────────────────────────────────────┐
│         选择主体类型                │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐   │
│  │   🏢 企业                   │   │
│  │   适用于企业、个体工商户    │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │   👤 个人                   │   │
│  │   适用于个人商户            │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │   🌍 境外主体               │   │
│  │   适用于港澳台及国外        │   │
│  └─────────────────────────────┘   │
│                                     │
│  [取消]                            │
└─────────────────────────────────────┘
```

---

## 交互流程

### 1. 首次进入页面

```
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  打开"我的"  │ --> │  检查登录状态│ --> │  未登录      │
└──────────────┘     └──────────────┘     │  跳转登录页  │
                                           └──────────────┘
                                                 ↓
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  已登录      │ --> │  检查认证状态│ --> │  未认证      │
└──────────────┘     └──────────────┘     │  显示认证入口│
                                           └──────────────┘
                                                 ↓
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  已认证      │ --> │  显示完整信息│ --> │  展示页面    │
└──────────────┘     └──────────────┘     └──────────────┘
```

---

### 2. 主体认证流程

```
┌──────────────────┐
│  点击"去认证"    │
└─────────┬────────┘
          ↓
┌──────────────────┐
│ 选择主体类型     │
│ (企业/个人/境外) │
└─────────┬────────┘
          ↓
┌──────────────────┐
│ 上传资质文件     │
│ - 拍照/相册      │
│ - 预览确认       │
└─────────┬────────┘
          ↓
┌──────────────────┐
│ 提交审核         │
└─────────┬────────┘
          ↓
┌──────────────────┐
│ 等待审核(1-3工作日)│
└─────────┬────────┘
          ↓
     ┌────┴────┐
     ↓         ↓
┌────────┐ ┌────────┐
│通过    │ │拒绝    │
│显示已认证│显示原因 │
└────────┘ └────────┘
```

---

### 3. 更新资质流程

```
┌──────────────────┐
│ 点击"更新资质"   │
└─────────┬────────┘
          ↓
┌──────────────────┐
│ 显示已上传资质   │
│ 可选择更新项     │
└─────────┬────────┘
          ↓
┌──────────────────┐
│ 上传新文件       │
│ 替换旧文件       │
└─────────┬────────┘
          ↓
┌──────────────────┐
│ 提交重新审核     │
└─────────┬────────┘
          ↓
┌──────────────────┐
│ 状态变为"审核中" │
└──────────────────┘
```

---

## 资质上传规则

### 1. 企业（Enterprise）

| 资质类型 | 是否必填 | 文件类型 | 大小限制 | 有效期 | 说明 |
|---------|---------|---------|---------|--------|------|
| 营业执照 | ✅ 必填 | JPG/PNG | ≤5MB | 需在有效期内 | 统一社会信用代码清晰可见 |
| 法人身份证 | ✅ 必填 | JPG/PNG | ≤5MB | 需在有效期内 | 人像面+国徽面 |
| 开户许可证 | ⚠️ 推荐 | JPG/PNG | ≤5MB | - | 有对公账户时需上传 |
| 行业许可证 | ⚠️ 可选 | JPG/PDF | ≤10MB | - | 特殊行业需上传 |
| 授权委托书 | ⚠️ 条件必填 | JPG/PNG | ≤5MB | - | 非法人本人办理时必填 |

**审核要点**：
- 营业执照名称与申请主体一致
- 法人信息与身份证一致
- 证件在有效期内
- 图片清晰完整，无遮挡

---

### 2. 个人（Individual）

| 资质类型 | 是否必填 | 文件类型 | 大小限制 | 有效期 | 说明 |
|---------|---------|---------|---------|--------|------|
| 身份证 | ✅ 必填 | JPG/PNG | ≤5MB | 需在有效期内 | 人像面+国徽面 |
| 银行卡 | ⚠️ 可选 | JPG/PNG | ≤5MB | - | 用于收款 |
| 营业执照 | ⚠️ 可选 | JPG/PNG | ≤5MB | 需在有效期内 | 个体户可上传 |
| 其他资质 | ⚠️ 可选 | JPG/PDF | ≤10MB | - | 根据行业要求 |

**审核要点**：
- 身份证年满18周岁
- 证件在有效期内
- 人脸清晰可见
- 证件信息与申请信息一致

---

### 3. 境外主体（Overseas）

#### 3.1 香港地区

| 资质类型 | 是否必填 | 文件类型 | 大小限制 | 说明 |
|---------|---------|---------|---------|------|
| 商业登记证 | ✅ 必填 | JPG/PNG | ≤5MB | 香港税务局发出 |
| 负责人证件 | ✅ 必填 | JPG/PNG | ≤5MB | 港澳居民来往内地通行证 |
| 委托书 | ⚠️ 条件必填 | JPG/PNG | ≤5MB | 非负责人本人办理 |
| 公证文件 | ⚠️ 推荐 | JPG/PDF | ≤10MB | 中国委托公证人公证 |

#### 3.2 澳门地区

| 资质类型 | 是否必填 | 文件类型 | 大小限制 | 说明 |
|---------|---------|---------|---------|------|
| 商业登记证明 | ✅ 必填 | JPG/PNG | ≤5MB | 澳门财政局发出 |
| 负责人证件 | ✅ 必填 | JPG/PNG | ≤5MB | 澳门居民来往内地通行证 |
| 委托书 | ⚠️ 条件必填 | JPG/PNG | ≤5MB | 非负责人本人办理 |
| 公证文件 | ⚠️ 推荐 | JPG/PDF | ≤10MB | 中国委托公证人公证 |

#### 3.3 台湾地区

| 资质类型 | 是否必填 | 文件类型 | 大小限制 | 说明 |
|---------|---------|---------|---------|------|
| 营利事业登记证 | ✅ 必填 | JPG/PNG | ≤5MB | 台湾经济部发出 |
| 负责人证件 | ✅ 必填 | JPG/PNG | ≤5MB | 台湾居民来往大陆通行证 |
| 委托书 | ⚠️ 条件必填 | JPG/PNG | ≤5MB | 非负责人本人办理 |
| 公证文件 | ✅ 必填 | JPG/PDF | ≤10MB | 需经海基会认证 |

#### 3.4 其他国家

| 资质类型 | 是否必填 | 文件类型 | 大小限制 | 说明 |
|---------|---------|---------|---------|------|
| 商业注册文件 | ✅ 必填 | JPG/PDF | ≤10MB | 需翻译成中文 |
| 负责人证件 | ✅ 必填 | JPG/PNG | ≤5MB | 护照 |
| 委托书 | ⚠️ 条件必填 | JPG/PNG | ≤5MB | 非负责人本人办理 |
| 使馆认证 | ✅ 必填 | JPG/PDF | ≤10MB | 中国驻外使馆认证 |

---

## 数据结构

### 1. 用户信息（UserInfo）

```typescript
interface UserInfo {
  userId: string                    // 用户ID
  nickname: string                  // 昵称
  avatar: string                    // 头像URL
  phone: string                     // 手机号（脱敏）
  email?: string                    // 邮箱（可选）
  entityType: EntityType            // 主体类型
  certificationStatus: CertificationStatus  // 认证状态
  certificationTime?: string         // 认证时间
}
```

### 2. 主体类型（EntityType）

```typescript
type EntityType = 'enterprise' | 'individual' | 'overseas'
```

### 3. 认证状态（CertificationStatus）

```typescript
type CertificationStatus =
  | 'uncertified'      // 未认证
  | 'pending'          // 审核中
  | 'certified'        // 已认证
  | 'rejected'         // 已拒绝
  | 'expired'          // 已过期
```

### 4. 企业资质（EnterpriseQualification）

```typescript
interface EnterpriseQualification {
  businessLicense: {                // 营业执照
    url: string                     // 文件URL
    creditCode: string              // 统一社会信用代码
    name: string                    // 企业名称
    expiryDate: string              // 有效期
  }
  legalPerson: {                    // 法人信息
    name: string                    // 姓名
    idCard: string                  // 身份证号（脱敏）
    idCardFront: string             // 身份证正面URL
    idCardBack: string              // 身份证反面URL
    expiryDate: string              // 有效期
  }
  bankAccount?: {                   // 开户许可证（可选）
    url: string                     // 文件URL
    accountNumber: string           // 账号（脱敏）
    bankName: string                // 开户行
  }
  industryLicense?: {               // 行业许可证（可选）
    url: string                     // 文件URL
    licenseType: string             // 许可证类型
    expiryDate: string              // 有效期
  }
  authorizationLetter?: {           // 授权委托书（可选）
    url: string                     // 文件URL
    trusteeName: string             // 被委托人姓名
    expiryDate: string              // 有效期
  }
}
```

### 5. 个人资质（IndividualQualification）

```typescript
interface IndividualQualification {
  idCard: {                         // 身份证
    name: string                    // 姓名
    idNumber: string                // 身份证号（脱敏）
    frontUrl: string                // 正面URL
    backUrl: string                 // 反面URL
    expiryDate: string              // 有效期
  }
  bankCard?: {                      // 银行卡（可选）
    bankName: string                // 开户行
    cardNumber: string              // 卡号（脱敏）
    holderName: string              // 持卡人姓名
  }
  businessLicense?: {               // 营业执照（可选）
    url: string                     // 文件URL
    creditCode: string              // 统一社会信用代码
    name: string                    // 名称
    expiryDate: string              // 有效期
  }
  otherQualifications?: Array<{     // 其他资质（可选）
    type: string                    // 类型
    url: string                     // 文件URL
    expiryDate?: string             // 有效期
  }>
}
```

### 6. 境外资质（OverseasQualification）

```typescript
interface OverseasQualification {
  region: OverseasRegion            // 地区
  businessRegistration: {           // 商业注册文件
    url: string                     // 文件URL
    registrationNumber: string      // 注册号
    name: string                    // 名称
    expiryDate?: string             // 有效期（如有）
  }
  responsiblePerson: {              // 负责人信息
    name: string                    // 姓名
    idType: string                  // 证件类型
    idNumber: string                // 证件号（脱敏）
    idUrl: string                   // 证件URL
    expiryDate: string              // 有效期
  }
  authorizationLetter?: {           // 委托书（可选）
    url: string                     // 文件URL
    trusteeName: string             // 被委托人姓名
    expiryDate: string              // 有效期
  }
  notarization?: {                  // 公证文件（推荐/必填）
    url: string                     // 文件URL
    notaryOrganization: string      // 公证机构
    issueDate: string               // 出具日期
  }
}

type OverseasRegion =
  | 'hongkong'      // 香港
  | 'macau'         // 澳门
  | 'taiwan'        // 台湾
  | 'other'         // 其他国家
```

### 7. 认证申请（CertificationApplication）

```typescript
interface CertificationApplication {
  applicationId: string             // 申请ID
  userId: string                    // 用户ID
  entityType: EntityType            // 主体类型
  qualification: EnterpriseQualification | IndividualQualification | OverseasQualification
  status: CertificationStatus       // 状态
  submitTime: string                // 提交时间
  reviewTime?: string               // 审核时间
  reviewer?: string                 // 审核人
  rejectReason?: string             // 拒绝原因
  remark?: string                   // 备注
}
```

---

## 开发规范

### 1. 页面文件结构

```
pages/profile/
├── index.vue              # 主页面
├── components/
│   ├── UserCard.vue       # 用户信息卡片
│   ├── QualificationCard.vue  # 资质卡片
│   ├── MenuList.vue       # 功能菜单列表
│   └── StatusBadge.vue    # 认证状态徽章
├── sub-pages/
│   ├── certification/     # 认证流程
│   │   ├── index.vue      # 选择主体类型
│   │   ├── enterprise.vue # 企业认证
│   │   ├── individual.vue # 个人认证
│   │   └── overseas.vue   # 境外认证
│   ├── qualification-detail/  # 资质详情
│   └── upload/            # 上传页面
└── types.ts              # TypeScript类型定义
```

---

### 2. API接口定义

```typescript
// API: 获取用户信息
GET /api/user/profile
Response: UserInfo

// API: 上传文件
POST /api/file/upload
Body: FormData (file)
Response: { url: string, fileId: string }

// API: 提交认证申请
POST /api/certification/apply
Body: CertificationApplication
Response: { applicationId: string }

// API: 获取认证状态
GET /api/certification/status
Response: CertificationApplication

// API: 更新资质
POST /api/certification/update
Body: Partial<CertificationApplication>
Response: { success: boolean }

// API: 获取认证历史
GET /api/certification/history
Response: CertificationApplication[]
```

---

### 3. 组件Props定义

```typescript
// UserCard.vue
interface UserCardProps {
  userInfo: UserInfo
  onEdit?: () => void
  onCertify?: () => void
}

// QualificationCard.vue
interface QualificationCardProps {
  entityType: EntityType
  qualification: EnterpriseQualification | IndividualQualification | OverseasQualification
  readonly?: boolean
  onUpdate?: () => void
}

// StatusBadge.vue
interface StatusBadgeProps {
  status: CertificationStatus
  size?: 'small' | 'medium' | 'large'
}
```

---

### 4. 样式规范

```scss
// 颜色变量
$primary-color: #667eea;
$primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
$success-color: #07c160;
$warning-color: #ff9500;
$error-color: #ff3b30;
$text-primary: #333333;
$text-secondary: #666666;
$text-tertiary: #999999;
$border-color: #e0e0e0;
$background-color: #f5f5f5;

// 间距
$spacing-xs: 8rpx;
$spacing-sm: 16rpx;
$spacing-md: 24rpx;
$spacing-lg: 32rpx;
$spacing-xl: 48rpx;

// 圆角
$radius-sm: 8rpx;
$radius-md: 16rpx;
$radius-lg: 24rpx;

// 阴影
$shadow-sm: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);
$shadow-md: 0 4rpx 16rpx rgba(0, 0, 0, 0.08);
$shadow-lg: 0 8rpx 32rpx rgba(0, 0, 0, 0.12);
```

---

### 5. 状态管理（Pinia）

```typescript
// stores/user.ts
export const useUserStore = defineStore('user', {
  state: () => ({
    userInfo: null as UserInfo | null,
    certificationStatus: 'uncertified' as CertificationStatus,
    currentApplication: null as CertificationApplication | null,
  }),

  getters: {
    isCertified: (state) => state.certificationStatus === 'certified',
    isPending: (state) => state.certificationStatus === 'pending',
    needsCertification: (state) => state.certificationStatus === 'uncertified',
  },

  actions: {
    async fetchUserInfo() { },
    async submitCertification(data: any) { },
    async updateQualification(data: any) { },
    async checkCertificationStatus() { },
  },
})
```

---

## 开发优先级

### P0 - 核心功能（必须完成）
1. ✅ 用户信息展示（头像、昵称、手机号）
2. ✅ 主体类型选择（企业/个人/境外）
3. ✅ 企业资质上传（营业执照+法人身份证）
4. ✅ 个人资质上传（身份证）
5. ✅ 认证状态展示（未认证/审核中/已认证）

### P1 - 重要功能（优先完成）
1. ⚠️ 境外资质上传（香港/澳门/台湾）
2. ⚠️ 资质查看和更新
3. ⚠️ 认证失败重新提交
4. ⚠️ 功能菜单（订单、地址、客服等）

### P2 - 增强功能（后续迭代）
1. 📋 资质到期提醒
2. 📋 认证历史记录
3. 📋 资质下载导出
4. 📋 多主体管理

---

## 附录

### A. 图标资源

| 功能 | 图标推荐 | 说明 |
|------|---------|------|
| 用户头像 | user-circle | 默认头像 |
| 已认证 | check-circle | 绿色勾选 |
| 未认证 | exclamation-circle | 橙色警告 |
| 审核中 | clock | 灰色时钟 |
| 已拒绝 | times-circle | 红色叉号 |
| 订单 | package-box | 蓝色盒子 |
| 地址 | map-marker | 红色定位 |
| 钱包 | wallet | 绿色钱包 |
| 客服 | headphones | 蓝色耳机 |
| 设置 | cog | 灰色齿轮 |

### B. 错误码定义

| 错误码 | 说明 | 处理建议 |
|--------|------|---------|
| 4001 | 未登录 | 跳转登录页 |
| 4002 | 已认证，不可重复提交 | 提示用户查看资质 |
| 4003 | 资质文件格式不支持 | 提示上传JPG/PNG |
| 4004 | 文件大小超限 | 提示压缩后重试 |
| 4005 | 证件信息识别失败 | 提示手动输入 |
| 4006 | 证件已过期 | 提示更换有效证件 |
| 5001 | 审核中，请勿重复提交 | 等待当前审核完成 |
| 5002 | 认证失败，请重新提交 | 显示失败原因 |

---

**文档版本**: v1.0
**最后更新**: 2025-02-09
**维护者**: 开发团队
